# تنظیمات محیط واقعی بانکی
# Real Banking Environment Configuration

# ========================================
# تنظیمات HSM (Hardware Security Module)
# ========================================
HSM_ENDPOINT=https://hsm.bank.ir:8443
HSM_CERT_PATH=/etc/ssl/certs/hsm-client.crt
HSM_KEY_PATH=/etc/ssl/private/hsm-client.key
HSM_CA_PATH=/etc/ssl/certs/hsm-ca.crt
HSM_CLIENT_ID=BANK_CARD_SYSTEM
HSM_TIMEOUT=30000
HSM_RETRY_ATTEMPTS=3

# نوع HSM
HSM_TYPE=THALES
HSM_MODEL=PayShield_9000
HSM_VERSION=3.0

# ========================================
# تنظیمات کلیدهای Zone
# ========================================
ZMK_LABEL=ZMK_MASTER
ZPK_LABEL=ZPK_DEFAULT
ZDK_LABEL=ZDK_DEFAULT

# ========================================
# تنظیمات DUKPT
# ========================================
BDK_LABEL=BDK_MASTER
IPEK_LABEL=IPEK_DEFAULT
DUKPT_SESSION_DURATION=86400000
DUKPT_MAX_SESSIONS=1000

# ========================================
# تنظیمات شبکه شتاب
# ========================================
SHETAB_SWITCH_HOST=shetab-switch.ir
SHETAB_SWITCH_PORT=8443
SHETAB_SWITCH_PROTOCOL=ISO8583
SHETAB_SWITCH_TIMEOUT=30000
SHETAB_SWITCH_RETRY_ATTEMPTS=3

# گواهی‌های mTLS برای شتاب
SHETAB_CERT_PATH=/etc/ssl/certs/shetab-client.crt
SHETAB_KEY_PATH=/etc/ssl/private/shetab-client.key
SHETAB_CA_PATH=/etc/ssl/certs/shetab-ca.crt

# OAuth2 برای شتاب
SHETAB_OAUTH_TOKEN_URL=https://auth.shetab.ir/oauth2/token
SHETAB_OAUTH_CLIENT_ID=shetab_client_id
SHETAB_OAUTH_CLIENT_SECRET=shetab_client_secret
SHETAB_OAUTH_SCOPE=card_management account_verification

# ========================================
# تنظیمات بانک مرکزی
# ========================================
CENTRAL_BANK_HOST=api.cbi.ir
CENTRAL_BANK_PORT=8443
CENTRAL_BANK_PROTOCOL=HTTPS_MTLS
CENTRAL_BANK_TIMEOUT=30000

# گواهی‌های mTLS برای بانک مرکزی
CENTRAL_BANK_CERT_PATH=/etc/ssl/certs/cbi-client.crt
CENTRAL_BANK_KEY_PATH=/etc/ssl/private/cbi-client.key
CENTRAL_BANK_CA_PATH=/etc/ssl/certs/cbi-ca.crt

# OAuth2 برای بانک مرکزی
CENTRAL_BANK_OAUTH_TOKEN_URL=https://auth.cbi.ir/oauth2/token
CENTRAL_BANK_OAUTH_CLIENT_ID=cbi_client_id
CENTRAL_BANK_OAUTH_CLIENT_SECRET=cbi_client_secret
CENTRAL_BANK_OAUTH_SCOPE=identity_verification card_registration

# ========================================
# تنظیمات بانک ملی
# ========================================
NATIONAL_BANK_HOST=api.bmi.ir
NATIONAL_BANK_PORT=8443
NATIONAL_BANK_PROTOCOL=HTTPS_MTLS
NATIONAL_BANK_TIMEOUT=30000

# گواهی‌های mTLS برای بانک ملی
NATIONAL_BANK_CERT_PATH=/etc/ssl/certs/bmi-client.crt
NATIONAL_BANK_KEY_PATH=/etc/ssl/private/bmi-client.key
NATIONAL_BANK_CA_PATH=/etc/ssl/certs/bmi-ca.crt

# OAuth2 برای بانک ملی
NATIONAL_BANK_OAUTH_TOKEN_URL=https://auth.bmi.ir/oauth2/token
NATIONAL_BANK_OAUTH_CLIENT_ID=bmi_client_id
NATIONAL_BANK_OAUTH_CLIENT_SECRET=bmi_client_secret
NATIONAL_BANK_OAUTH_SCOPE=account_verification balance_inquiry

# ========================================
# تنظیمات محیط بانکی
# ========================================
BANKING_ENV=production
BANKING_TIMEOUT=30000
BANKING_RETRY_ATTEMPTS=3
BANKING_BACKOFF_DELAY=1000

# ========================================
# تنظیمات پایگاه داده
# ========================================
MONGODB_URI=mongodb://localhost:27017/real_banking_system
MONGODB_OPTIONS=retryWrites=true&w=majority

# ========================================
# تنظیمات امنیتی
# ========================================
JWT_SECRET=your_super_secret_jwt_key_here_change_in_production
JWT_EXPIRES_IN=24h
BCRYPT_ROUNDS=12

# ========================================
# تنظیمات لاگ و مانیتورینگ
# ========================================
LOG_LEVEL=info
LOG_FILE=/var/log/real_banking_system.log
AUDIT_LOG_FILE=/var/log/real_banking_audit.log

# ========================================
# تنظیمات تشریفات کلید
# ========================================
KEY_CEREMONY_REQUIRE_PHYSICAL_PRESENCE=true
KEY_CEREMONY_REQUIRE_IDENTITY_VERIFICATION=true
KEY_CEREMONY_REQUIRE_WITNESS=true
KEY_CEREMONY_MIN_PARTICIPANTS=2
KEY_CEREMONY_MAX_PARTICIPANTS=6
KEY_CEREMONY_RECORDING_REQUIRED=true
KEY_CEREMONY_DOCUMENTATION_REQUIRED=true

# ========================================
# تنظیمات چرخش کلید
# ========================================
ZMK_ROTATION_PERIOD_DAYS=90
ZPK_ROTATION_PERIOD_DAYS=180
ZDK_ROTATION_PERIOD_DAYS=365
KEY_ROTATION_REQUIRE_QUORUM=true
KEY_ROTATION_MIN_QUORUM_SIZE=2
KEY_ROTATION_MAX_QUORUM_SIZE=4

# ========================================
# تنظیمات PIN و CVV2
# ========================================
PIN_DEFAULT_LENGTH=4
PIN_MIN_LENGTH=4
PIN_MAX_LENGTH=6
PIN_ALLOW_REPEATED_DIGITS=false
PIN_ALLOW_SEQUENTIAL_DIGITS=false
PIN_ALLOW_COMMON_PINS=false
PIN_MAX_ATTEMPTS=3
PIN_LOCKOUT_DURATION_HOURS=24
PIN_REQUIRE_COMPLEXITY=true

CVV2_ALGORITHM=VISA_PVV
CVV2_LENGTH=3
CVV2_INCLUDE_EXPIRY=true
CVV2_INCLUDE_SERVICE_CODE=true

# ========================================
# تنظیمات محدودیت‌های تراکنش
# ========================================
TRANSACTION_LIMITS_DAILY_ATM=5000000
TRANSACTION_LIMITS_DAILY_POS=10000000
TRANSACTION_LIMITS_MONTHLY_TOTAL=100000000
TRANSACTION_LIMITS_SINGLE_MAX=1000000

# ========================================
# تنظیمات شبکه و اتصال
# ========================================
NETWORK_TIMEOUT=30000
NETWORK_RETRY_ATTEMPTS=3
NETWORK_BACKOFF_DELAY=1000
NETWORK_MAX_CONNECTIONS=100
NETWORK_KEEP_ALIVE=true

# ========================================
# تنظیمات فایل‌های کانفیگ
# ========================================
BIN_PROFILES_PATH=/etc/banking/bin-profiles.yaml
EMV_PROFILES_PATH=/etc/banking/emv-profiles.yaml
SWITCH_SPECS_PATH=/etc/banking/switch-specs.yaml
PIN_POLICIES_PATH=/etc/banking/pin-policies.yaml
CVV2_POLICIES_PATH=/etc/banking/cvv2-policies.yaml

# ========================================
# تنظیمات مانیتورینگ و هشدار
# ========================================
MONITORING_ENABLED=true
MONITORING_INTERVAL_MS=30000
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_SMTP_HOST=smtp.bank.ir
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_FROM=alerts@bank.ir
ALERT_EMAIL_TO=security@bank.ir

# ========================================
# تنظیمات پشتیبان‌گیری
# ========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=90
BACKUP_STORAGE_PATH=/backup/real_banking_system
BACKUP_ENCRYPTION_ENABLED=true

# ========================================
# تنظیمات تست و توسعه
# ========================================
TEST_MODE=false
DEBUG_MODE=false
MOCK_HSM_ENABLED=false
MOCK_BANKING_ENABLED=false

# ========================================
# تنظیمات اضافی
# ========================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
CORS_ORIGIN=https://bank.ir
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100